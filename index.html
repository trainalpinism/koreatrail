<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>íŠ¸ë ˆì¸ì˜ ì½”ë¦¬ì•„ë‘˜ë ˆê¸¸</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        #toggleMapType {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
            background: white;
            border: 1px solid #ccc;
            padding: 6px 10px;
            font-size: 13px;
            cursor: pointer;
            border-radius: 4px;
            box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
        }

        #memoBox {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid #ccc;
            padding: 10px 12px;
            font-size: 14px;
            border-radius: 8px;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);
            max-width: 350px;
            line-height: 1.2;
        }

        #memoBox button#closeMemo {
            position: absolute;
            top: 4px;
            right: 6px;
            background: none;
            border: none;
            font-size: 14px;
            color: #666;
            cursor: pointer;
        }

        #map {
            width: 100%;
            height: 100vh;
        }

        .circle-marker {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            user-select: none;
        }

        .memo-overlay {
            background: white;
            padding: 4px 8px;
            border: 1px solid gray;
            font-size: 12px;
            border-radius: 6px;
            white-space: nowrap;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 6px;
            line-height: 1.2;
        }

        .memo-overlay button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 12px;
            color: gray;
        }
    </style>
    <script
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=19f1385bacd7bf7d9e5c7804cc8154ce&libraries=services,clusterer,drawing">
    </script>
</head>

<body>
    <div id="memoBox">
        <button id="closeMemo">âœ–</button>
        <h3>ğŸ“Œ íŠ¸ë ˆì¸ì˜ ì½”ë¦¬ì•„ë‘˜ë ˆê¸¸ ì§„í–‰ í˜„í™©.</h3>
        <p>2024ë…„ 10ì›” 20ì¼ ì„œí•´ë‘ê¸¸ 103ì½”ìŠ¤ ë‚¨ì§„ ì‹œì‘</p>
        <p>2025ë…„ 11ì›” 16ì¼ í˜„ì¬ ì„œí•´ë‘ê¸¸ 55ì½”ìŠ¤ ì™„ë£Œ</p>
        <p>- ë„ë³´ ì´ë™ ëˆ„ì  ê±°ë¦¬ / ì´ê±°ë¦¬ : 763km / 4,530km</p>
        <p>- ë„ë³´ ì´ë™ ëˆ„ì  ì†Œìš” ì‹œê°„ : 223ì‹œê°„ 49ë¶„(28ì¼)</p>
        <p>- ì‹ìŒë£Œ ëˆ„ì  ë¹„ìš©(2ì¸) : 1,259,550ì›</p>
        <p>- ìì°¨ ì´ë™ ëˆ„ì  ê±°ë¦¬ : 4,067.4km</p>
        <p>- ìì°¨ í†¨ë¹„ ëˆ„ì  ë¹„ìš© : 232,200ì›</p>
        <p>- ìì°¨ ìœ ë¥˜ë¹„ ëˆ„ì  ë¹„ìš© : 589,245ì›</p>
        <p>- ëŒ€ì¤‘êµí†µ ì´ë™ ëˆ„ì  ê±°ë¦¬ : 716.2km</p>
        <p>- ëŒ€ì¤‘êµí†µ ëˆ„ì  ë¹„ìš©(2ì¸): 721,220ì›</p>
    </div>
    <button id="toggleMapType">ğŸ›° ìœ„ì„± ë³´ê¸°</button>
    <div id="map"></div>
    <script>
        const map = new kakao.maps.Map(document.getElementById('map'), {
            center: new kakao.maps.LatLng(35.990698, 126.714526),
            level: 6
        });

        function createCircleMarker(markerData, color, borderColor) {
            const position = new kakao.maps.LatLng(markerData.lat, markerData.lng);
            const markerEl = document.createElement("div");
            markerEl.className = "circle-marker";
            markerEl.style.backgroundColor = color;
            markerEl.style.border = "4px solid " + borderColor;

            const markerOverlay = new kakao.maps.CustomOverlay({
                content: markerEl,
                position: position,
                map: map,
                xAnchor: 0.3,
                yAnchor: 0.0
            });

            const memoEl = document.createElement("div");
            memoEl.className = "memo-overlay";
            memoEl.style.display = "none";
            memoEl.innerHTML = `<span>${markerData.memo}</span><button>âœ–</button>`;

            const memoOverlay = new kakao.maps.CustomOverlay({
                content: memoEl,
                position: position,
                yAnchor: 1.5
            });

            markerEl.addEventListener("click", () => {
                const isVisible = memoEl.style.display === "block";
                memoEl.style.display = isVisible ? "none" : "block";
                memoOverlay.setMap(isVisible ? null : map);
            });

            memoEl.querySelector("button").addEventListener("click", () => {
                memoEl.style.display = "none";
                memoOverlay.setMap(null);
            });
        }

        const yellowMarkers = [
  { lat: 37.825038, lng: 126.434792, memo: 'ì„œí•´ë‘ê¸¸103ë¶' },
  { lat: 37.77006, lng: 126.355739, memo: 'ì„œí•´ë‘ê¸¸103ë‚¨102ë¶' },
  { lat: 37.700752, lng: 126.380982, memo: 'ì„œí•´ë‘ê¸¸102ë‚¨101ë¶' },
  { lat: 37.663188, lng: 126.465197, memo: 'ì„œí•´ë‘ê¸¸101ë‚¨100ë¶' },
  { lat: 37.641129, lng: 126.539808, memo: 'ì„œí•´ë‘ê¸¸100ë‚¨99ë¶' },
  { lat: 37.627273, lng: 126.630474, memo: 'ì„œí•´ë‘ê¸¸99ë‚¨98ë¶' },
  { lat: 37.568845, lng: 126.674339, memo: 'ì„œí•´ë‘ê¸¸98ë‚¨97ë¶' },
  { lat: 37.524695, lng: 126.684526, memo: 'ì„œí•´ë‘ê¸¸97ë‚¨96ë¶' },
  { lat: 37.475758, lng: 126.620546, memo: 'ì„œí•´ë‘ê¸¸96ë‚¨95ë¶' },
  { lat: 37.426684, lng: 126.698588, memo: 'ì„œí•´ë‘ê¸¸95ë‚¨94ë¶' },
  { lat: 37.433359, lng: 126.735387, memo: 'ì„œí•´ë‘ê¸¸94ë‚¨93ë¶' },
  { lat: 37.354838, lng: 126.701816, memo: 'ì„œí•´ë‘ê¸¸93ë‚¨92ë¶' },
  { lat: 37.289603, lng: 126.578031, memo: 'ì„œí•´ë‘ê¸¸92ë‚¨91ë¶' },
  { lat: 37.237674, lng: 126.56698, memo: 'ì„œí•´ë‘ê¸¸91ë‚¨90ë¶' },
  { lat: 37.217746, lng: 126.57605, memo: 'ì„œí•´ë‘ê¸¸90ë‚¨89ë¶' },
  { lat: 37.190599, lng: 126.655545, memo: 'ì„œí•´ë‘ê¸¸89ë‚¨88ë¶' },
  { lat: 37.116789, lng: 126.683203, memo: 'ì„œí•´ë‘ê¸¸88ë‚¨87ë¶' },
  { lat: 37.026536, lng: 126.794781, memo: 'ì„œí•´ë‘ê¸¸87ë‚¨86ë¶' },
  { lat: 36.958217, lng: 126.847423, memo: 'ì„œí•´ë‘ê¸¸86ë‚¨85ë¶' },
  { lat: 36.935125, lng: 126.992159, memo: 'ì„œí•´ë‘ê¸¸85ë‚¨84ë¶' },
  { lat: 36.871781, lng: 126.881813, memo: 'ì„œí•´ë‘ê¸¸84ë‚¨83ë¶' },
  { lat: 36.941508, lng: 126.786948, memo: 'ì„œí•´ë‘ê¸¸83ë‚¨82ë¶' },
  { lat: 36.961293, lng: 126.686443, memo: 'ì„œí•´ë‘ê¸¸82ë‚¨81ë¶' },
  { lat: 37.028869, lng: 126.561746, memo: 'ì„œí•´ë‘ê¸¸81ë‚¨80ë¶' },
  { lat: 37.003908, lng: 126.452012, memo: 'ì„œí•´ë‘ê¸¸80ë‚¨79ë¶' },
  { lat: 36.939442, lng: 126.430815, memo: 'ì„œí•´ë‘ê¸¸79ë‚¨78ë¶' },
  { lat: 36.884038, lng: 126.411118, memo: 'ì„œí•´ë‘ê¸¸78ë‚¨77ë¶' },
  { lat: 36.826677, lng: 126.363027, memo: 'ì„œí•´ë‘ê¸¸77ë‚¨76ë¶' },
  { lat: 36.827501, lng: 126.327848, memo: 'ì„œí•´ë‘ê¸¸76ë‚¨75ë¶' },
  { lat: 36.831725, lng: 126.311947, memo: 'ì„œí•´ë‘ê¸¸75ë‚¨74ë¶' },
  { lat: 36.907306, lng: 126.303468, memo: 'ì„œí•´ë‘ê¸¸74ë‚¨73ë¶' },
  { lat: 36.9672, lng: 126.30427, memo: 'ì„œí•´ë‘ê¸¸73ë‚¨72ë¶' },
  { lat: 36.936189, lng: 126.292584, memo: 'ì„œí•´ë‘ê¸¸72ë‚¨71ë¶' },
  { lat: 36.900651, lng: 126.205301, memo: 'ì„œí•´ë‘ê¸¸71ë‚¨70ë¶' },
  { lat: 36.831787, lng: 126.167719, memo: 'ì„œí•´ë‘ê¸¸70ë‚¨69ë¶' },
  { lat: 36.785504, lng: 126.142421, memo: 'ì„œí•´ë‘ê¸¸69ë‚¨68ë¶' },
  { lat: 36.762236, lng: 126.176904, memo: 'ì„œí•´ë‘ê¸¸68ë‚¨67ë¶' },
  { lat: 36.695586, lng: 126.209472, memo: 'ì„œí•´ë‘ê¸¸67ë‚¨66ë¶' },
  { lat: 36.667024, lng: 126.289333, memo: 'ì„œí•´ë‘ê¸¸66ë‚¨65ë¶' },
  { lat: 36.625255, lng: 126.359563, memo: 'ì„œí•´ë‘ê¸¸65ë‚¨64ë¶' },
  { lat: 36.588908, lng: 126.457837, memo: 'ì„œí•´ë‘ê¸¸64ë‚¨63ë¶' },
  { lat: 36.508275, lng: 126.484616, memo: 'ì„œí•´ë‘ê¸¸63ë‚¨62ë¶' },
  { lat: 36.438937, lng: 126.522254, memo: 'ì„œí•´ë‘ê¸¸62ë‚¨61ë¶' },
  { lat: 36.395678, lng: 126.501877, memo: 'ì„œí•´ë‘ê¸¸61ë‚¨60ë¶' },
  { lat: 36.314241, lng: 126.511062, memo: 'ì„œí•´ë‘ê¸¸60ë‚¨59ë¶' },
  { lat: 36.163876, lng: 126.526306, memo: 'ì„œí•´ë‘ê¸¸59ë‚¨58ë¶' },
  { lat: 36.132982, lng: 126.582265, memo: 'ì„œí•´ë‘ê¸¸58ë‚¨57ë¶' },
  { lat: 36.073717, lng: 126.632847, memo: 'ì„œí•´ë‘ê¸¸57ë‚¨56ë¶' },
  { lat: 36.008179, lng: 126.693544, memo: 'ì„œí•´ë‘ê¸¸56ë‚¨55ë¶' },
  { lat: 35.990698, lng: 126.714528, memo: 'ì„œí•´ë‘ê¸¸55ë‚¨54ë¶' }
];

yellowMarkers.forEach(m => createCircleMarker(m, "yellow", "red"));

const redMarkers = [
  { lat: 37.74772213996456, lng: 126.48402579459045, memo: 'ì„œë¬¸ê¹€ë°¥' },
  { lat: 37.63650016764841, lng: 126.49185700776043, memo: 'í™ì„±ë˜íŠ¹í—ˆê¹€ë°¥' },
  { lat: 37.59658491498378, lng: 126.66707356364606, memo: 'íŒŒë¦¬ë°”ê²ŒíŠ¸ ê²€ë‹¨2ì§€êµ¬ì ' },
  { lat: 37.475070607250316, lng: 126.64493237781842, memo: 'ì†¡ë¦¼ë™ í•´ì¥êµ­ì§‘' },
  { lat: 37.475631855098, lng: 126.61971623735018, memo: 'ì—°ê²½' },
  { lat: 37.45243517663534, lng: 126.63244644207633, memo: 'ìŠ¤íƒ€ë²…ìŠ¤' },
  { lat: 37.40938869192894, lng: 126.69389136724412, memo: '1ì¸µ ê³µë‹¨ë–¡ë³¶ì´ / 2ì¸µ ë°±ì•”ì™•ìˆœ' },
  { lat: 37.3412847400125, lng: 126.68692016522122, memo: 'ê±°ë¶ì„  íšŸì§‘' },
  { lat: 37.31281521495574, lng: 126.6091584056575, memo: 'ì‹œí™”ë‹¬ì „ë§ëŒ€ / ì¹´í˜ì´ë£¨ë‚˜' },
  { lat: 37.265201, lng: 126.559655, memo: 'ëŒ€ë¶€ë„ ì°°ë³´ë¦¬ ë§‰êµ­ìˆ˜' },
  { lat: 37.11692716719302, lng: 126.682718413387, memo: 'ê¶í‰ì˜ í•˜ë£¨' },
  { lat: 36.989059, lng: 126.846937, memo: 'íŒŒë¦¬ë°”ê²ŒíŠ¸' },
  { lat: 36.946072739478076, lng: 126.91360602938481, memo: 'ë°¥ë³´ë‹¤êµ­ì‹œ' },
  { lat: 36.879816, lng: 126.907503, memo: 'ë¶€ì†¡êµ­ìˆ˜' },
  { lat: 36.955376, lng: 126.692815, memo: 'ì´ì¥ë‹˜ë°¥ìƒ' },
  { lat: 37.00130197524012, lng: 126.45216594966656, memo: 'ì‚¬ê³„ì ˆì‹ë‹¹' },
  { lat: 37.00328435562593, lng: 126.45217138665569, memo: 'ì»¤í”¼ë°”ë¼' },
  { lat: 36.94138138938408, lng: 126.42986595537529, memo: 'í˜¸ë‘ì´ ë¶€í˜' },
  { lat: 36.847059, lng: 126.294171, memo: 'ë ˆí”¼ë‹¤ë¦¬ì¡°íŠ¸ ì¹´í˜í˜' },
  { lat: 36.751639044701015, lng: 126.30308428219325, memo: 'ë•ìˆ˜ì‹ë‹¹' },
  { lat: 36.896637924099906, lng: 126.20578915406352, memo: 'ë¯¸ë½ê°€ë“ ' },
  { lat: 36.785193191767064, lng: 126.14267082868157, memo: 'í˜¸ë‚¨íšŸì§‘' },
  { lat: 36.738155213997224, lng: 126.13380933319092, memo: 'ì¸ìƒë²„ê±°' },
  { lat: 36.622261, lng: 126.348459, memo: 'ìš©ì™•ë‹˜ë°¥ìƒ' },
  { lat: 36.50826984934871, lng: 126.48661239978023, memo: 'ê¹Œì¹˜ë„¤êµ´ìˆ˜ì‚°' },
  { lat: 36.31486346384212, lng: 126.51207760992516, memo: 'ìŠ¤íƒ€ë²…ìŠ¤' },
  { lat: 36.3052429976616, lng: 126.51697243747174, memo: 'íŒ”ë„ê°•ì‚°' },  
  { lat: 36.25940618324392, lng: 126.54382420537179, memo: 'ë²¨ë¼ì½”ìŠ¤íƒ€' },  
  { lat: 35.98879349508031, lng: 126.7140554023181, memo: 'ë¹ˆí•´ì›' },
  { lat: 35.9872119330469, lng: 126.71127497140715, memo: 'ì´ì„±ë‹¹' },
  { lat: 35.987562933735234, lng: 126.70828239323836, memo: 'í•œì¼ì˜¥' }
];

redMarkers.forEach(m => createCircleMarker(m, "red", "white"));

        function createIconMarker(markerData) {
            const position = new kakao.maps.LatLng(markerData.lat, markerData.lng);

            const marker = new kakao.maps.Marker({
                map: map,
                position: position,
                image: new kakao.maps.MarkerImage(markerData.icon, new kakao.maps.Size(50, 35), {
                    offset: new kakao.maps.Point(25, 17)
                })
            });

            const memoEl = document.createElement("div");
            memoEl.className = "memo-overlay";
            memoEl.style.display = "none";
            memoEl.innerHTML = `<span>${markerData.memo}</span><button>âœ–</button>`;

            const memoOverlay = new kakao.maps.CustomOverlay({
                content: memoEl,
                position: position,
                yAnchor: 1.5
            });

            kakao.maps.event.addListener(marker, 'click', () => {
                const isVisible = memoEl.style.display === "block";
                memoEl.style.display = isVisible ? "none" : "block";
                memoOverlay.setMap(isVisible ? null : map);
            });

            memoEl.querySelector("button").addEventListener("click", () => {
                memoEl.style.display = "none";
                memoOverlay.setMap(null);
            });
        }

        const iconMarkers = [{ 'lat': 35.990698, 'lng': 126.714528, 'memo': 'íŠ¸ë ˆì¸', 'icon': 'https://kimsunho.com/wp-content/uploads/2025/05/KSH-YJY-icon.png' }];
        iconMarkers.forEach(m => createIconMarker(m));

        fetch("ktrail_train_kakao.geojson")
            .then(res => res.json())
            .then(data => {
                data.features.forEach(feature => {
                    const coords = feature.geometry.coordinates.map(c => new kakao.maps.LatLng(c[1], c[0]));
                    const polyline = new kakao.maps.Polyline({
                        path: coords,
                        strokeWeight: 4,
                        strokeColor: "#0033cc",
                        strokeOpacity: 0.8,
                        strokeStyle: "solid"
                    });
                    polyline.setMap(map);
                });
            });
        let isSatellite = false;
        document.getElementById("toggleMapType").addEventListener("click", () => {
            isSatellite = !isSatellite;
            map.setMapTypeId(isSatellite ? kakao.maps.MapTypeId.HYBRID : kakao.maps.MapTypeId.ROADMAP);
            document.getElementById("toggleMapType").textContent = isSatellite ? "ğŸ—º ì¼ë°˜ì§€ë„ ë³´ê¸°" : "ğŸ›° ìœ„ì„± ë³´ê¸°";
        });

        document.getElementById("closeMemo").addEventListener("click", () => {
            document.getElementById("memoBox").style.display = "none";
        });

    </script>
</body>

</html>